define ("local_notebook/notebook_drawer",["jquery","core/custom_interaction_events","core/drawer","core/pubsub"],function(a,b,c,d){var f={JUMPTO:".notebookbutton [data-region=\"jumpto\"]",DRAWER:"[data-region=\"right-hand-notebook-drawer\"]",HEADER_CONTAINER:"[data-region=\"header-container\"]",BODY_CONTAINER:"[data-region=\"body-container\"]",CLOSE_BUTTON:"[data-action=\"closedrawer\"]"},g={SHOW:"notebook-drawer-show",HIDE:"notebook-drawer-hide",TOGGLE_VISIBILITY:"notebook-drawer-toggle"},h=function(a){if(!a.attr("data-shown")){a.attr("data-shown",!0)}var b=l(a);if(b.length){c.show(b)}},i=function(a){var b=l(a);if(b.length){c.hide(b)}},j=function(a){var b=l(a);if(b.length){return c.isVisible(b)}return!0},k=function(b){a(f.DRAWER).attr("data-origin",b)},l=function(b){b=a(b);return b.closest("[data-region=\"right-hand-notebook-drawer\"]")},m=function(e){b.define(e,[b.events.activate]);d.subscribe(g.SHOW,function(){h(e)});d.subscribe(g.HIDE,function(){i(e)});d.subscribe(g.TOGGLE_VISIBILITY,function(b){if(j(e)){i(e);a(f.JUMPTO).attr("tabindex",-1)}else{h(e);k(b);a(f.JUMPTO).attr("tabindex",0)}});a(f.JUMPTO).on("focus",function(){var b=e.find(f.CLOSE_BUTTON);if(b.length){b.focus()}else{a(f.HEADER_CONTAINER).find(f.ROUTES_BACK).focus()}});a(f.DRAWER).focus(function(){var b=a(this).attr("data-origin");if(b){a("#"+b).focus()}});var l=e.find(f.CLOSE_BUTTON);l.on(b.events.activate,function(b,c){c.originalEvent.preventDefault();var e=a(f.DRAWER).attr("data-origin");if(e){a("#"+e).focus()}d.publish(g.TOGGLE_VISIBILITY)});var m=c.getDrawerRoot(a("[data-region=\"message-drawer\"]")),n=a("[id^=\"message-drawer-toggle-\"]");n.on("click keydown keypress",function(){var a=event.keyCode?event.keyCode:event.which;if("13"==a||"32"==a||"click"==event.type){if(c.isVisible(m)&&j(e)){i(e)}}})};return{init:function init(b){b=a(b);m(b)}}});
//# sourceMappingURL=notebook_drawer.min.js.map
